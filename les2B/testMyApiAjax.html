<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>myAPI</title>
    <link rel="stylesheet" href="style.css"> 
    <script src="ajax_callback.js" defer></script>
    <script src="https://unpkg.com/react@17/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js" crossorigin></script>
    <script src="Components.js" defer></script>
  </head>
  <body>
    <h1 id="myHeader">Test myAPI</h1>
    <form class="myForm">
        <fieldset class="formControl">
            <legend>Data verzenden met HTTP GET protocol</legend>
            <label>Data</label>
            <input type = "text" name = "data" id="myTextInput">
            <input type = "button" id = "myButton" value = "Submit HTTP GET AJAX ">
            <img src="duurzaam_huis_logo.png" width="200" alt="logo" title="logo">
       </fieldset>
    </form>
    <div id="antwoordHier"></div>
    <div id="c-alert-container" class="c-alert-container">
      <div id="alertContent" class="c-alert">
          <p>{alert.text}</p>
      </div>
  </div>
    <script>
      let controlScript = "myApi.php"; // adres van de Api

      let myTextInput = document.getElementById('myTextInput'); // bind element text invoerveld

      let myButton = document.getElementById('myButton'); // bind element button
      //click handler voor de button
      myButton.addEventListener('click', doHttpGet);
      
      function doHttpGet(){
          // maak de HTTP string
          let http_Get_String = controlScript + '?data=' + myTextInput.value; 
          // voorbeeld http_Get_String = myApi.php?data=qwerty 
          console.log(http_Get_String); // debug
          makeAjaxCall(http_Get_String, 'GET'). then (writeData); // doe het HTTP request
      }

      function writeData(dataVanServer){
        console.log(dataVanServer); // debug
        document.getElementById('antwoordHier').innerHTML = dataVanServer;
      }
    </script>
  </body>
</html>
